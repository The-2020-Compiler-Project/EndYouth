
# 第二次阶段报告

## 负责内容

1.文法修改

2.语义分析的整体设计

3.构造翻译文法，画出翻译文法的递归下降子程序图

4.写出翻译文法的函数代码

5.与负责语义分析的组员进行沟通，对接口问题

## 具体实现

1.将语法分析生成的语法树存到tree_table数组里

2.从程序开始，按递归下降子程序进行函数调用，并进行语义栈入栈，弹栈，生成四元式放入四元式区，及符号表的查找，插入，删除等

struct Target{//四元式操作对象，可为不同类型
	string target_s;
	int target_i;
	float target_f; 
};
struct Quaternion
{
	string operate;//操作
	//有关选择操作对象的类型，根据其分类码选择
	Target target1;//操作对象1
	Target target2;//操作对象2
	Target outcome;//结果
}QT[MAX];//四元式结构(存放四元式的表)
int now_outcome=1;//结果是tnow_outcome
int now_qt = 0;//四元式计数用
stack<Target>SEM;//语义栈

## 遇到问题

1.在设计翻译文法及写代码过程中，遇到文法格式问题，需要变换格式才能进行递归下降子程序设计，插入语义动作的位置及语义动作的设计也是苦思冥想，比较纠结，好在已经确定

2.昨天与负责语义分析的同学对接口发现有很多不一样的地方，废了很长时间修改与统一，出现这样的问题究其根源在于一开始文法的设计不成功，造成后来反复修改，二是没有提前统一接口，而是各干各的，所以交流很关键，三是符号表的设计

## 感想

通过自己设计，写代码对语义分析加深了理解，更加细致的学习理解了这部分内容。

我们组一起熬夜赶工的时间，虽然身体已疲惫不堪，但因为并肩，所以斗志满满
